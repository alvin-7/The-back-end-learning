## 分布式锁

1. try...finally 结构，finally中释放锁，保证无论try中逻辑是否正确，锁都能够被释放
2. 使用redis.set(key, value, ex=xx, nx=True)来生成一把有超时时间的锁
3. 为了保证每个开启锁和释放锁都正确，锁的值应该为客户端唯一标识值，且需要根据该值释放锁（如果锁的值不是该值，不应该释放）
4. 当成功生成锁之后，开启另外一个守护线程，该线程每隔1/3锁时间来检测锁是否还存在，如果存在，则延长锁时间，保证我们的逻辑在任何情况下，都能够被执行完，并能够正确释放锁

